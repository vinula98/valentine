<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Will you be my Valentine?</title>
<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#1b0f1f,#0f1020);
  color:white;
  overflow:hidden;
  position:relative;
}
.container{
  text-align:center;
  position:relative;
  z-index:10;
}
h1{
  font-size:32px;
  margin-bottom:60px;
}
.buttons{
  display:flex;
  gap:30px;
  justify-content:center;
  align-items:center;
}
button{
  padding:14px 28px;
  font-size:16px;
  font-weight:bold;
  border:none;
  border-radius:12px;
  cursor:pointer;
  min-width:120px;
}
#yesBtn{
  background:#ff2d55;
  color:white;
  z-index:20;
}
#yesBtn:hover{
  background:#ff4d6d;
  box-shadow:0 0 20px rgba(255, 45, 85, 0.5);
}
#noBtn{
  background:#333;
  color:white;
  position:fixed;
  z-index:15;
}
canvas{
  position:fixed;
  top:0;
  left:0;
  pointer-events:none;
  z-index:5;
}
</style>
</head>
<body>
<canvas id="confetti"></canvas>
<div class="container">
  <h1>Will you be my Valentine? ‚ù§Ô∏è</h1>
  <div class="buttons">
    <button id="yesBtn">YES üíñ</button>
    <button id="noBtn">NO üôÉ</button>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
let dodges = 0;
const maxDodges = 6;
let noBtnInitialized = false;

// Resize canvas
function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// Initialize NO button position
function initNoBtn() {
  if (!noBtnInitialized) {
    const rect = noBtn.getBoundingClientRect();
    noBtn.style.left = rect.left + 'px';
    noBtn.style.top = rect.top + 'px';
    noBtnInitialized = true;
  }
}

// Move NO button
function moveNo(){
  if(dodges >= maxDodges) return;
  
  initNoBtn(); // Make sure it's initialized first
  dodges++;
  
  // Get button dimensions
  const btnRect = noBtn.getBoundingClientRect();
  const btnWidth = btnRect.width;
  const btnHeight = btnRect.height;
  
  // Calculate safe boundaries with padding
  const padding = 30;
  const minX = padding;
  const minY = padding;
  const maxX = window.innerWidth - btnWidth - padding;
  const maxY = window.innerHeight - btnHeight - padding;
  
  // Generate random position within safe bounds
  let newX, newY;
  let attempts = 0;
  
  do {
    newX = minX + Math.random() * (maxX - minX);
    newY = minY + Math.random() * (maxY - minY);
    attempts++;
  } while (attempts < 10 && (
    // Make sure it's not too close to YES button
    Math.abs(newX - yesBtn.getBoundingClientRect().left) < 200 &&
    Math.abs(newY - yesBtn.getBoundingClientRect().top) < 100
  ));
  
  // Ensure values are within bounds
  newX = Math.max(minX, Math.min(maxX, newX));
  newY = Math.max(minY, Math.min(maxY, newY));
  
  noBtn.style.left = newX + "px";
  noBtn.style.top = newY + "px";
  
  const texts = [
    "NO üôÉ",
    "NO? üëÄ",
    "Try again üòõ",
    "Nope üòå",
    "Are you sure? ü•∫",
    "Okay fine you win üò≠"
  ];
  noBtn.innerText = texts[Math.min(dodges, texts.length-1)];
}

noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("touchstart", (e)=>{
  if(dodges < maxDodges){
    e.preventDefault();
    moveNo();
  }
},{passive:false});

// Confetti
function startConfetti(){
  const pieces = Array.from({length:150}, () => ({
    x: Math.random()*canvas.width,
    y: Math.random()*-canvas.height,
    size: 5+Math.random()*8,
    speed: 2+Math.random()*4,
    color: ["#ff2d55","#ff4d6d","#ffd166","#9b5cff","#4cc9f0"][Math.floor(Math.random()*5)]
  }));
  const start = Date.now();
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      p.y += p.speed;
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x,p.y,p.size,p.size);
    });
    if(Date.now() - start < 2500){
      requestAnimationFrame(animate);
    } else {
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  }
  animate();
}

// YES click
yesBtn.addEventListener("click", () => {
  startConfetti();
  // Wait 1.8 seconds then open WhatsApp
  setTimeout(()=>{
    window.location.href =
      "https://api.whatsapp.com/send?phone=61404781574&text=" +
      encodeURIComponent("I said YES to being your Valentine üòå‚ù§Ô∏è");
  }, 1800);
});
});
</script>
</body>
</html>
